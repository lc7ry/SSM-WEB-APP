{% extends "base.html" %}

{% block title %}Vehicles - SuliStreetMeet{% endblock %}

{% block content %}
<div class="dashboard-section">
    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 animate-fade-in">
                    <h1 class="hero-title">
                        Vehicle <span class="text-green">Registry</span>
                    </h1>
                    <p class="hero-subtitle">
                        View and manage all registered vehicles in the community
                    </p>
                </div>
                <div class="col-lg-6 animate-slide-in">
                    <div class="car-silhouette">
                        <i class="fas fa-car"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-5">
        <!-- Stats Overview -->
        <div class="row g-4 mb-5">
            <div class="col-md-4 animate-fade-in-delay">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-car"></i>
                    </div>
                    <div class="stat-number">{{ vehicles|length }}</div>
                    <div class="stat-label">Total Vehicles</div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-6">
                <form method="GET" action="{{ url_for('vehicles') }}">
                    <div class="input-group">
                        <input type="text" class="form-control" name="search" placeholder="Search vehicles..." value="{{ search }}">
                        <button class="btn btn-primary" type="submit">
                            <i class="fas fa-search"></i> Search
                        </button>
                    </div>
                </form>
            </div>
            <div class="col-md-6">
                <form method="GET" action="{{ url_for('vehicles') }}">
                    <div class="input-group">
                        <select class="form-select" name="make">
                            <option value="">All Makes</option>
                            {% for make in ['Toyota', 'Honda', 'Ford', 'Chevrolet', 'BMW', 'Mercedes', 'Audi', 'Nissan', 'Mazda', 'Subaru', 'Volkswagen', 'Hyundai', 'Kia', 'Lexus', 'Acura', 'Infiniti', 'Other'] %}
                                <option value="{{ make }}" {% if make == make_filter %}selected{% endif %}>{{ make }}</option>
                            {% endfor %}
                        </select>
                        <button class="btn btn-secondary" type="submit">Filter</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th>Make</th>
                                <th>Model</th>
                                <th>Year</th>
                                <th>Color</th>
                                <th>Owner</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if vehicles %}
                                {% for vehicle in vehicles %}
                                <tr>
                                    <td>{{ vehicle[2] or 'N/A' }}</td>
                                    <td>{{ vehicle[3] or 'N/A' }}</td>
                                    <td>{{ vehicle[4] or 'N/A' }}</td>
                                    <td>{{ vehicle[5] or 'N/A' }}</td>
                                    <td>{{ vehicle[9] }} {{ vehicle[10] }}</td>
                                    <td>
                                        <a href="{{ url_for('vehicle_detail', vehicle_id=vehicle[0]) }}" class="btn btn-sm btn-info">
                                            <i class="fas fa-eye"></i> View
                                        </a>
                                        <a href="{{ url_for('edit_vehicle', vehicle_id=vehicle[0]) }}" class="btn btn-sm btn-warning">
                                            <i class="fas fa-edit"></i> Edit
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="6" class="text-center">
                                        <p>No vehicles found.</p>
                                        {% if search %}
                                            <p class="text-muted">Try adjusting your search criteria.</p>
                                        {% endif %}
                                    </td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-12 text-center">
                <a href="{{ url_for('add_vehicle') }}" class="btn btn-success">
                    <i class="fas fa-plus"></i> Add New Vehicle
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
